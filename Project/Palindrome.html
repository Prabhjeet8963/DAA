<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Palindrome Partitioning Visualizer</title>
  <style>
    :root {
      --bg: #0f172a;
      --card: #1e293b;
      --border: #334155;
      --accent: #3b82f6;
      --accent-hover: #2563eb;
      --text: #f1f5f9;
      --muted: #94a3b8;
      --input: #0f172a;
      --chip: #334155;
      --success: #10b981;
      --danger: #ef4444;
    }

    * {
      box-sizing: border-box;
      outline: none;
    }

    body {
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.5;
      display: flex;
      justify-content: center;
      min-height: 100vh;
      padding: 20px;
    }

    .wrap {
      width: 100%;
      max-width: 900px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 32px;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      position: relative;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 24px;
    }

    .title-group h1 {
      margin: 0 0 8px 0;
      font-size: 28px;
      font-weight: 700;
      background: linear-gradient(to right, #60a5fa, #a78bfa);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .subtitle {
      color: var(--muted);
      font-size: 15px;
      margin: 0;
    }

    .info-btn {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--muted);
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 18px;
    }

    .info-btn:hover {
      color: var(--text);
      border-color: var(--accent);
      background: rgba(59, 130, 246, 0.1);
    }

    .controls {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      align-items: center;
    }

    .input-group {
      flex: 1;
      min-width: 200px;
    }

    input[type=text] {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: var(--input);
      color: var(--text);
      font-size: 16px;
      transition: border-color 0.2s;
    }

    input[type=text]:focus {
      border-color: var(--accent);
    }

    .btn-group {
      display: flex;
      gap: 8px;
    }

    button {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    #run {
      background: var(--accent);
      color: white;
    }

    #run:hover {
      background: var(--accent-hover);
    }

    #stop {
      background: rgba(239, 68, 68, 0.1);
      color: var(--danger);
      border: 1px solid rgba(239, 68, 68, 0.2);
    }

    #stop:hover {
      background: rgba(239, 68, 68, 0.2);
    }

    #clear {
      background: var(--chip);
      color: var(--muted);
    }

    #clear:hover {
      background: var(--border);
      color: var(--text);
    }

    .limit-control {
      display: flex;
      align-items: center;
      gap: 8px;
      background: var(--input);
      padding: 4px 12px;
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--muted);
      font-size: 14px;
    }

    .limit-btn {
      background: var(--chip);
      color: var(--text);
      width: 24px;
      height: 24px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      font-size: 16px;
    }

    .limit-btn:hover {
      background: var(--border);
    }

    .samples {
      display: flex;
      gap: 8px;
      margin-bottom: 24px;
      flex-wrap: wrap;
    }

    .sample-label {
      color: var(--muted);
      font-size: 14px;
      display: flex;
      align-items: center;
      margin-right: 4px;
    }

    .sample {
      padding: 6px 12px;
      border: 1px solid var(--border);
      border-radius: 20px;
      background: rgba(30, 41, 59, 0.5);
      color: var(--muted);
      font-size: 13px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .sample:hover {
      color: var(--accent);
      border-color: var(--accent);
      background: rgba(59, 130, 246, 0.05);
    }

    .stats-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      font-size: 14px;
      color: var(--muted);
    }

    .stat-item strong {
      color: var(--text);
      font-weight: 600;
    }

    .progress-container {
      height: 4px;
      background: var(--input);
      border-radius: 2px;
      overflow: hidden;
      margin-bottom: 20px;
    }

    .progress-bar {
      height: 100%;
      width: 0;
      background: var(--accent);
      transition: width 0.1s linear;
    }

    .list-container {
      background: var(--input);
      border: 1px solid var(--border);
      border-radius: 12px;
      height: 400px;
      overflow-y: auto;
      padding: 16px;
    }

    .list-container::-webkit-scrollbar {
      width: 8px;
    }

    .list-container::-webkit-scrollbar-track {
      background: transparent;
    }

    .list-container::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 4px;
    }

    ol {
      margin: 0;
      padding-left: 20px;
      color: var(--muted);
    }

    li {
      margin-bottom: 8px;
    }

    .partition-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .part-chip {
      padding: 4px 10px;
      background: var(--chip);
      border-radius: 16px;
      color: var(--text);
      font-size: 14px;
      font-family: 'Courier New', monospace;
      border: 1px solid var(--border);
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .modal-overlay.open {
      display: flex;
      opacity: 1;
    }

    .modal {
      background: var(--card);
      width: 90%;
      max-width: 600px;
      max-height: 85vh;
      overflow-y: auto;
      border-radius: 16px;
      border: 1px solid var(--border);
      padding: 32px;
      position: relative;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
    }

    .close-modal {
      position: absolute;
      top: 20px;
      right: 20px;
      background: transparent;
      border: none;
      color: var(--muted);
      font-size: 24px;
      cursor: pointer;
    }

    .close-modal:hover {
      color: var(--text);
    }

    .modal h2 {
      margin-top: 0;
      color: var(--text);
    }

    .modal h3 {
      color: var(--accent);
      margin-top: 24px;
      font-size: 18px;
    }

    .modal p {
      color: var(--muted);
      line-height: 1.6;
    }

    .distinct-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 12px;
    }

    .distinct-item {
      background: var(--chip);
      padding: 4px 12px;
      border-radius: 4px;
      color: var(--text);
      font-family: monospace;
      border: 1px solid var(--border);
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="header">
      <div class="title-group">
        <h1>Palindrome Partitioning</h1>
        <p class="subtitle">Design and Analysis of Algorithms Lab</p>
      </div>
      <button class="info-btn" id="infoBtn" title="Project Details">?</button>
    </div>
    <div class="controls">
      <div class="input-group">
        <input id="input" type="text" placeholder="Enter a string" autocomplete="off" spellcheck="false"
          title="Enter a string to partition">
      </div>
      <div class="limit-control">
        <span>Limit:</span>
        <strong id="limitDisplay">1000</strong>
        <button class="limit-btn" id="decLimit">-</button>
        <button class="limit-btn" id="incLimit">+</button>
      </div>
      <div class="btn-group">
        <button id="run" title="Start the partition algorithm">
          <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 3l14 9-14 9V3z"></path>
          </svg>
          Partition
        </button>
        <button id="stop" title="Stop the current process">Stop</button>
        <button id="clear" title="Clear results and reset">Clear</button>
      </div>
    </div>
    <div class="samples">
      <span class="sample-label">Try:</span>
      <div class="sample" data-s="aab">aab</div>
      <div class="sample" data-s="abba">abba</div>
      <div class="sample" data-s="racecar">racecar</div>
      <div class="sample" data-s="banana">banana</div>
      <div class="sample" data-s="aabac">aabac</div>
    </div>
    <div class="stats-bar">
      <div class="stat-item">Found: <strong id="count">0</strong></div>
      <div class="stat-item">Time: <strong id="time">-</strong></div>
    </div>
    <div class="progress-container">
      <div class="progress-bar" id="bar"></div>
    </div>
    <div class="list-container">
      <ol id="list"></ol>
    </div>
  </div>
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <button class="close-modal" id="closeModal">&times;</button>
      <h2>Palindrome Partitioning Problem</h2>
      <p>The Palindrome Partitioning problem involves partitioning a given string <code>s</code> into a set of
        substrings such that every substring is a palindrome.</p>
      <h3>Algorithmic Approach</h3>
      <p>This solution utilizes <strong>Dynamic Programming</strong> to optimize the palindrome checking process. A 2D
        boolean table is precomputed to store the palindrome status of all substrings. This table is then queried during
        a <strong>Backtracking (DFS)</strong> traversal to generate all valid partitions efficiently.</p>
      <h3>Optimization</h3>
      <p>By precomputing the palindrome table in O(n<sup>2</sup>) time, we avoid repeated O(n) checks during the
        recursion, significantly improving the overall performance of the algorithm.</p>
      <h3>Distinct Palindromic Substrings</h3>
      <p>The following unique palindromes were identified during the process:</p>
      <div id="distinctContainer" class="distinct-list">
        <span style="color: var(--muted); font-style: italic;">Run the algorithm to see results here.</span>
      </div>
    </div>
  </div>
  <script>
    let stopFlag = false;
    let maxResults = 1000;
    let distinctPalindromes = new Set();
    function precomputePal(s) {
      const n = s.length;
      const pal = Array.from({ length: n }, () => Array(n).fill(false));
      for (let i = 0; i < n; i++) pal[i][i] = true;
      for (let len = 2; len <= n; len++) {
        for (let start = 0; start + len <= n; start++) {
          const end = start + len - 1;
          if (s[start] !== s[end]) {
            pal[start][end] = false;
          } else {
            pal[start][end] = len === 2 ? true : pal[start + 1][end - 1];
          }
        }
      }
      return pal;
    }
    function* partitionsGen(s, pal) {
      const n = s.length;
      const path = [];
      function* dfs(start) {
        if (start === n) {
          yield path.slice();
          return;
        }
        for (let i = start; i < n; i++) {
          if (pal[start][i]) {
            const sub = s.slice(start, i + 1);
            path.push(sub);
            distinctPalindromes.add(sub);
            yield* dfs(i + 1);
            path.pop();
          }
        }
      }
      yield* dfs(0);
    }
    function renderItem(parts) {
      const li = document.createElement('li');
      const container = document.createElement('div');
      container.className = 'partition-row';
      for (const p of parts) {
        const span = document.createElement('span');
        span.className = 'part-chip';
        span.textContent = p;
        container.appendChild(span);
      }
      li.appendChild(container);
      return li;
    }
    function updateDistinctDisplay() {
      const container = document.getElementById('distinctContainer');
      container.innerHTML = '';
      if (distinctPalindromes.size === 0) {
        container.innerHTML = '<span style="color: var(--muted); font-style: italic;">No palindromes found yet.</span>';
        return;
      }
      const sorted = Array.from(distinctPalindromes).sort();
      for (const p of sorted) {
        const span = document.createElement('div');
        span.className = 'distinct-item';
        span.textContent = p;
        container.appendChild(span);
      }
    }
    function run() {
      const s = document.getElementById('input').value.trim();
      const list = document.getElementById('list');
      const bar = document.getElementById('bar');
      const countEl = document.getElementById('count');
      const timeEl = document.getElementById('time');
      list.innerHTML = '';
      bar.style.width = '0%';
      countEl.textContent = '0';
      timeEl.textContent = '-';
      stopFlag = false;
      distinctPalindromes.clear();
      updateDistinctDisplay();
      if (!s.length) return;
      const t0 = performance.now();
      const pal = precomputePal(s);
      const gen = partitionsGen(s, pal);
      let produced = 0;
      let finished = false;
      const batchSize = 100;
      function step() {
        if (stopFlag) {
          finish();
          return;
        }
        let processed = 0;
        while (processed < batchSize) {
          const n = gen.next();
          if (n.done) {
            finished = true;
            break;
          }
          list.appendChild(renderItem(n.value));
          produced++;
          processed++;
          if (produced >= maxResults) {
            finished = true;
            const msg = document.createElement('div');
            msg.style.padding = '10px';
            msg.style.color = 'var(--accent)';
            msg.style.textAlign = 'center';
            msg.textContent = `Limit reached (showing first ${maxResults} results)`;
            list.appendChild(msg);
            break;
          }
        }
        countEl.textContent = produced.toLocaleString();
        if (finished) bar.style.width = '100%';
        else bar.style.width = '50%';
        if (finished) {
          finish();
        } else {
          requestAnimationFrame(step);
        }
      }
      function finish() {
        const dt = (performance.now() - t0).toFixed(1) + ' ms';
        timeEl.textContent = dt;
        bar.style.width = '100%';
        bar.style.backgroundColor = stopFlag ? '#ef4444' : '#10b981';
        updateDistinctDisplay();
      }
      step();
    }
    document.getElementById('run').addEventListener('click', run);
    document.getElementById('stop').addEventListener('click', () => {
      stopFlag = true;
    });
    document.getElementById('clear').addEventListener('click', () => {
      document.getElementById('list').innerHTML = '';
      document.getElementById('count').textContent = '0';
      document.getElementById('time').textContent = '-';
      document.getElementById('bar').style.width = '0%';
      document.getElementById('input').value = '';
      distinctPalindromes.clear();
      updateDistinctDisplay();
    });
    document.getElementById('input').addEventListener('keydown', (e) => {
      if (e.key === 'Enter') run();
    });
    document.querySelectorAll('.sample').forEach(x =>
      x.addEventListener('click', function () {
        document.getElementById('input').value = this.dataset.s;
        run();
      })
    );
    document.getElementById('incLimit').addEventListener('click', () => {
      maxResults += 100;
      document.getElementById('limitDisplay').textContent = maxResults;
    });
    document.getElementById('decLimit').addEventListener('click', () => {
      if (maxResults > 100) maxResults -= 100;
      document.getElementById('limitDisplay').textContent = maxResults;
    });
    const modal = document.getElementById('modalOverlay');
    const infoBtn = document.getElementById('infoBtn');
    const closeBtn = document.getElementById('closeModal');
    infoBtn.addEventListener('click', () => modal.classList.add('open'));
    closeBtn.addEventListener('click', () => modal.classList.remove('open'));
    modal.addEventListener('click', (e) => {
      if (e.target === modal) modal.classList.remove('open');
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && modal.classList.contains('open')) {
        modal.classList.remove('open');
      }
    });
  </script>
</body>

</html>